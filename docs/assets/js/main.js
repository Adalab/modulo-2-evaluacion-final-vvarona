"use strict";const searchInput=document.querySelector(".js-search-input"),searchButton=document.querySelector(".js-search-button"),resetButton=document.querySelector(".js-reset-button"),resetFavButton=document.querySelector(".js-fav-reset-button"),favListHTML=document.querySelector(".js-favorite-list"),resultList=document.querySelector(".js-result-list"),serverURL="https://api.jikan.moe/v4/anime?q=",formSearch=document.querySelector(".search"),serverInvalidImage="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png",placeholderImage="https://via.placeholder.com/225x350/3D3D3D/666666/?text=No+image+:(";let animeResultList=[];const animeFavList=[];function handleCardClick(e){const t=parseInt(e.currentTarget.id),n=animeResultList.find(e=>e.mal_id===t),a=animeFavList.findIndex(e=>e.mal_id===t);-1===a?animeFavList.push(n):animeFavList.splice(a,1),console.log("animeFavList:",animeFavList),renderCard(animeResultList,resultList),renderCard(animeFavList,favListHTML)}function listenCard(){const e=document.querySelectorAll(".js-anime-card");for(const t of e)t.addEventListener("click",handleCardClick)}function getFromServer(e){return fetch(serverURL+e).then(e=>e.json()).then(e=>{animeResultList=e.data}).catch(e=>{console.error(e)})}function addFavClass(){}function renderCard(e,t){t.innerHTML="";for(const n of e){let e=n.title,a=n.images.jpg.image_url,r=n.mal_id,s="";s=-1!==animeFavList.findIndex(e=>e.mal_id===r)?"fav":"",a===serverInvalidImage&&(a=placeholderImage),t.innerHTML+=`<li class="js-anime-card card ${s}" id="${r}">\n      <img class="card-image" alt"Imagen de ${e}" title="Imagen de ${e}" src="${a}"/>\n      <h3 class="card-title">${e}</h3>\n    </li>`,listenCard()}}function handleButton(e){e.preventDefault();let t=searchInput.value,n=serverURL+t;console.log(n),getFromServer(n).then(()=>{renderCard(animeResultList,resultList)})}function handleInput(e){e.preventDefault();let t=searchInput.value,n=serverURL+t;console.log(n)}function handleReset(e){e.preventDefault();const t=searchInput.value="";let n=serverURL+t;resultList.innerHTML="",console.log(n)}function handleFavReset(e){e.preventDefault();const t=document.querySelectorAll(".fav");for(const e of t)e.classList.remove("fav");animeFavList.length=0,favListHTML.innerHTML="",renderCard(animeFavList,favListHTML)}searchInput.addEventListener("keyup",handleInput),resetButton.addEventListener("click",handleReset),formSearch.addEventListener("click",e=>e.preventDefault),searchButton.addEventListener("click",handleButton),resetFavButton.addEventListener("click",handleFavReset);